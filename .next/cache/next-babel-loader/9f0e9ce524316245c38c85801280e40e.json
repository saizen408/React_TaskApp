{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport axios from 'axios';\nimport React, { useContext } from 'react';\nimport { UserContext, UserProvider } from './contexts/user.context';\nexport function handleAuthSSR() {\n  var token, proxyUrl, targetUrl, res, data;\n  return _regeneratorRuntime.async(function handleAuthSSR$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          token = useContext(UserContext);\n          proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n          targetUrl = 'https://owusu-task-manager.herokuapp.com/tasks';\n          _context.prev = 3;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(axios.get(proxyUrl + targetUrl, {\n            headers: {\n              Authorization: 'Bearer ' + token.token\n            }\n          }));\n\n        case 6:\n          res = _context.sent;\n          data = res.data; // const data = res.data\n\n          console.log(data);\n          return _context.abrupt(\"return\", {\n            posts: data\n          });\n\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](3);\n          console.error('Error:', _context.t0);\n\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[3, 12]]);\n}","map":{"version":3,"sources":["/Users/ericowusu/Documents/React _Course_Projects/Next/first-next/components/handleAuthSSR.js"],"names":["axios","React","useContext","UserContext","UserProvider","handleAuthSSR","token","proxyUrl","targetUrl","get","headers","Authorization","res","data","console","log","posts","error"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,WAAT,EAAsBC,YAAtB,QAA0C,yBAA1C;AAEA,OAAO,SAAeC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,UAAAA,KADD,GACSJ,UAAU,CAACC,WAAD,CADnB;AAECI,UAAAA,QAFD,GAEY,sCAFZ;AAGCC,UAAAA,SAHD,GAGa,gDAHb;AAAA;AAAA;AAAA,2CAMeR,KAAK,CAACS,GAAN,CAAUF,QAAQ,GAAGC,SAArB,EAAgC;AAChDE,YAAAA,OAAO,EAAE;AACPC,cAAAA,aAAa,EAAE,YAAYL,KAAK,CAACA;AAD1B;AADuC,WAAhC,CANf;;AAAA;AAMGM,UAAAA,GANH;AAWKC,UAAAA,IAXL,GAWcD,GAXd,CAWKC,IAXL,EAWmB;;AACtBC,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AAZG,2CAaI;AACLG,YAAAA,KAAK,EAAEH;AADF,WAbJ;;AAAA;AAAA;AAAA;AAiBHC,UAAAA,OAAO,CAACG,KAAR,CAAc,QAAd;;AAjBG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import axios from 'axios';\nimport React, { useContext } from 'react';\nimport { UserContext, UserProvider } from './contexts/user.context';\n\nexport async function handleAuthSSR() {\n  const token = useContext(UserContext);\n  const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n  const targetUrl = 'https://owusu-task-manager.herokuapp.com/tasks';\n\n  try {\n    const res = await axios.get(proxyUrl + targetUrl, {\n      headers: {\n        Authorization: 'Bearer ' + token.token\n      }\n    });\n    const { data } = res; // const data = res.data\n    console.log(data);\n    return {\n      posts: data\n    };\n  } catch (e) {\n    console.error('Error:', e);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}