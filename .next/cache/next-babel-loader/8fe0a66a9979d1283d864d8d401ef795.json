{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport Router from \"next/router\";\nimport { Cookies } from \"react-cookie\";\nconst cookies = new Cookies();\n\nconst authReducer = async (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      var data = {\n        email: action.email,\n        password: action.password\n      };\n\n      try {\n        const proxyUrl = \"https://cors-anywhere.herokuapp.com/\";\n        const url = \"https://owusu-task-manager.herokuapp.com/users/login\";\n        const response = await fetch(proxyUrl + url, {\n          method: \"POST\",\n          body: _JSON$stringify(data),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        const userInfo = await response.json();\n        console.log(\"setting userInfo: \", userInfo);\n        var token = userInfo.token;\n        cookies.set(\"token\", token);\n        state.token = token;\n        Router.push(\"/TodoAppPage\");\n        console.log(\"pushing to todoapppage!\");\n      } catch (e) {\n        console.log(\"setting state.error to false!\", state.error);\n        state.error = true;\n        console.error(\"Error:\", e);\n        Router.push(\"/\");\n      }\n\n      return state;\n\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;","map":{"version":3,"sources":["/Users/ericowusu/Documents/React _Course_Projects/Next/first-next/components/reducers/auth.reducer.js"],"names":["Router","Cookies","cookies","authReducer","state","action","type","data","email","password","proxyUrl","url","response","fetch","method","body","headers","userInfo","json","console","log","token","set","push","e","error"],"mappings":";AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,SAASC,OAAT,QAAwB,cAAxB;AAEA,MAAMC,OAAO,GAAG,IAAID,OAAJ,EAAhB;;AACA,MAAME,WAAW,GAAG,OAAOC,KAAP,EAAcC,MAAd,KAAyB;AAC3C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,OAAL;AACE,UAAIC,IAAI,GAAG;AACTC,QAAAA,KAAK,EAAEH,MAAM,CAACG,KADL;AAETC,QAAAA,QAAQ,EAAEJ,MAAM,CAACI;AAFR,OAAX;;AAIA,UAAI;AACF,cAAMC,QAAQ,GAAG,sCAAjB;AACA,cAAMC,GAAG,GAAG,sDAAZ;AACA,cAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACH,QAAQ,GAAGC,GAAZ,EAAiB;AAC3CG,UAAAA,MAAM,EAAE,MADmC;AAE3CC,UAAAA,IAAI,EAAE,gBAAeR,IAAf,CAFqC;AAG3CS,UAAAA,OAAO,EAAE;AACP,4BAAgB;AADT;AAHkC,SAAjB,CAA5B;AAQA,cAAMC,QAAQ,GAAG,MAAML,QAAQ,CAACM,IAAT,EAAvB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCH,QAAlC;AACA,YAAII,KAAK,GAAGJ,QAAQ,CAACI,KAArB;AACAnB,QAAAA,OAAO,CAACoB,GAAR,CAAY,OAAZ,EAAqBD,KAArB;AACAjB,QAAAA,KAAK,CAACiB,KAAN,GAAcA,KAAd;AAEArB,QAAAA,MAAM,CAACuB,IAAP,CAAY,cAAZ;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD,OAnBD,CAmBE,OAAOI,CAAP,EAAU;AACVL,QAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6ChB,KAAK,CAACqB,KAAnD;AACArB,QAAAA,KAAK,CAACqB,KAAN,GAAc,IAAd;AAEAN,QAAAA,OAAO,CAACM,KAAR,CAAc,QAAd,EAAwBD,CAAxB;AACAxB,QAAAA,MAAM,CAACuB,IAAP,CAAY,GAAZ;AACD;;AACD,aAAOnB,KAAP;;AAEF;AACE,aAAOA,KAAP;AAnCJ;AAqCD,CAtCD;;AAuCA,eAAeD,WAAf","sourcesContent":["import Router from \"next/router\";\nimport { Cookies } from \"react-cookie\";\n\nconst cookies = new Cookies();\nconst authReducer = async (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      var data = {\n        email: action.email,\n        password: action.password\n      };\n      try {\n        const proxyUrl = \"https://cors-anywhere.herokuapp.com/\";\n        const url = \"https://owusu-task-manager.herokuapp.com/users/login\";\n        const response = await fetch(proxyUrl + url, {\n          method: \"POST\",\n          body: JSON.stringify(data),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n\n        const userInfo = await response.json();\n        console.log(\"setting userInfo: \", userInfo);\n        var token = userInfo.token;\n        cookies.set(\"token\", token);\n        state.token = token;\n\n        Router.push(\"/TodoAppPage\");\n        console.log(\"pushing to todoapppage!\");\n      } catch (e) {\n        console.log(\"setting state.error to false!\", state.error);\n        state.error = true;\n\n        console.error(\"Error:\", e);\n        Router.push(\"/\");\n      }\n      return state;\n\n    default:\n      return state;\n  }\n};\nexport default authReducer;\n"]},"metadata":{},"sourceType":"module"}