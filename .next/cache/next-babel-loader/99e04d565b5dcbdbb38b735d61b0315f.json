{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport Router from 'next/router';\nimport useInputState from '../hooks/useInputState';\n\nvar authReducer = function authReducer(state, action) {\n  var _useInputState, _useInputState2, emailVal, handleEmailChange, emailReset, _useInputState3, _useInputState4, passVal, handlePassChange, passReset, data, proxyUrl, url, response, userInfo, token;\n\n  return _regeneratorRuntime.async(function authReducer$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _useInputState = useInputState(''), _useInputState2 = _slicedToArray(_useInputState, 3), emailVal = _useInputState2[0], handleEmailChange = _useInputState2[1], emailReset = _useInputState2[2];\n          _useInputState3 = useInputState(''), _useInputState4 = _slicedToArray(_useInputState3, 3), passVal = _useInputState4[0], handlePassChange = _useInputState4[1], passReset = _useInputState4[2];\n          _context.t0 = action.type;\n          _context.next = _context.t0 === 'LOGIN' ? 5 : 27;\n          break;\n\n        case 5:\n          // setLoader(true);\n          // getToken();\n          data = {\n            email: action.email,\n            password: action.password\n          };\n          _context.prev = 6;\n          proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n          url = 'https://owusu-task-manager.herokuapp.com/users/login';\n          _context.next = 11;\n          return _regeneratorRuntime.awrap(fetch(proxyUrl + url, {\n            method: 'POST',\n            body: _JSON$stringify(data),\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }));\n\n        case 11:\n          response = _context.sent;\n          _context.next = 14;\n          return _regeneratorRuntime.awrap(response.json());\n\n        case 14:\n          userInfo = _context.sent;\n          token = userInfo.token;\n          state.token = token;\n          Router.push('/TodoAppPage'); //   setLoader(false);\n          // this.setState(() => ({ loading: false, token: userInfo.token }));\n          // Router.push('/TodoAppPage');\n\n          _context.next = 26;\n          break;\n\n        case 20:\n          _context.prev = 20;\n          _context.t1 = _context[\"catch\"](6);\n          console.error('Error:', _context.t1);\n          emailReset();\n          passReset();\n          Router.push('/'); //   setLoader(false);\n          // this.setState({ email: '', password: '' });\n\n        case 26:\n          return _context.abrupt(\"return\", state);\n\n        case 27:\n          console.log('case not found in reducer');\n          return _context.abrupt(\"return\", state);\n\n        case 29:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[6, 20]]);\n};\n\nexport default authReducer; // {type: 'ADD', task: \"Walk the Dog\"}\n// {type: 'REMOVE', id: 156651}\n// {type: 'EDIT', id: 112839, newTask: 'Walk Cat'}\n// {type: 'LOGIN', email: '112839@fgjd.com', password: '12344568'}\n// {type: 'LOGIN', emaill: action.email, password: action.password}","map":{"version":3,"sources":["/Users/ericowusu/Documents/React _Course_Projects/Next/first-next/components/reducers/auth.reducer.js"],"names":["Router","useInputState","authReducer","state","action","emailVal","handleEmailChange","emailReset","passVal","handlePassChange","passReset","type","data","email","password","proxyUrl","url","fetch","method","body","headers","response","json","userInfo","token","push","console","error","log"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,aAAnB;AACA,OAAOC,aAAP,MAA0B,wBAA1B;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAOC,KAAP,EAAcC,MAAd;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,2BACgCH,aAAa,CAAC,EAAD,CAD7C,uDACXI,QADW,uBACDC,iBADC,uBACkBC,UADlB;AAAA,4BAE6BN,aAAa,CAAC,EAAD,CAF1C,wDAEXO,OAFW,uBAEFC,gBAFE,uBAEgBC,SAFhB;AAAA,wBAIVN,MAAM,CAACO,IAJG;AAAA,0CAKX,OALW;AAAA;;AAAA;AAMd;AACA;AAEIC,UAAAA,IATU,GASH;AACTC,YAAAA,KAAK,EAAET,MAAM,CAACS,KADL;AAETC,YAAAA,QAAQ,EAAEV,MAAM,CAACU;AAFR,WATG;AAAA;AAcNC,UAAAA,QAdM,GAcK,sCAdL;AAeNC,UAAAA,GAfM,GAeA,sDAfA;AAAA;AAAA,2CAgBWC,KAAK,CAACF,QAAQ,GAAGC,GAAZ,EAAiB;AAC3CE,YAAAA,MAAM,EAAE,MADmC;AAE3CC,YAAAA,IAAI,EAAE,gBAAeP,IAAf,CAFqC;AAG3CQ,YAAAA,OAAO,EAAE;AACP,8BAAgB;AADT;AAHkC,WAAjB,CAhBhB;;AAAA;AAgBNC,UAAAA,QAhBM;AAAA;AAAA,2CAwBWA,QAAQ,CAACC,IAAT,EAxBX;;AAAA;AAwBNC,UAAAA,QAxBM;AAyBRC,UAAAA,KAzBQ,GAyBAD,QAAQ,CAACC,KAzBT;AA0BZrB,UAAAA,KAAK,CAACqB,KAAN,GAAcA,KAAd;AACAxB,UAAAA,MAAM,CAACyB,IAAP,CAAY,cAAZ,EA3BY,CA4BZ;AACA;AAEA;;AA/BY;AAAA;;AAAA;AAAA;AAAA;AAiCZC,UAAAA,OAAO,CAACC,KAAR,CAAc,QAAd;AACApB,UAAAA,UAAU;AACVG,UAAAA,SAAS;AACTV,UAAAA,MAAM,CAACyB,IAAP,CAAY,GAAZ,EApCY,CAqCZ;AAEA;;AAvCY;AAAA,2CAyCPtB,KAzCO;;AAAA;AAuDduB,UAAAA,OAAO,CAACE,GAAR,CAAY,2BAAZ;AAvDc,2CAwDPzB,KAxDO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAApB;;AA2DA,eAAeD,WAAf,C,CAEA;AACA;AACA;AACA;AACA","sourcesContent":["import Router from 'next/router';\nimport useInputState from '../hooks/useInputState';\n\nconst authReducer = async (state, action) => {\n  const [emailVal, handleEmailChange, emailReset] = useInputState('');\n  const [passVal, handlePassChange, passReset] = useInputState('');\n\n  switch (action.type) {\n    case 'LOGIN':\n      // setLoader(true);\n      // getToken();\n\n      var data = {\n        email: action.email,\n        password: action.password\n      };\n      try {\n        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n        const url = 'https://owusu-task-manager.herokuapp.com/users/login';\n        const response = await fetch(proxyUrl + url, {\n          method: 'POST',\n          body: JSON.stringify(data),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n\n        const userInfo = await response.json();\n        var token = userInfo.token;\n        state.token = token;\n        Router.push('/TodoAppPage');\n        //   setLoader(false);\n        // this.setState(() => ({ loading: false, token: userInfo.token }));\n\n        // Router.push('/TodoAppPage');\n      } catch (error) {\n        console.error('Error:', error);\n        emailReset();\n        passReset();\n        Router.push('/');\n        //   setLoader(false);\n\n        // this.setState({ email: '', password: '' });\n      }\n      return state;\n\n    //     return [...state, { id: uuid(), task: action.task, completed: false }];\n    //   case 'LOGOUT':\n    //     return state.filter(todo => todo.id !== action.id);\n    //   case 'TOGGLE':\n    //     return state.map(todo =>\n    //       todo.id === action.id ? { ...todo, completed: !todo.completed } : todo\n    //     );\n    //   case 'EDIT':\n    //     return state.map(todo =>\n    //       todo.id === action.id ? { ...todo, task: action.newTask } : todo\n    //     );\n    default:\n      console.log('case not found in reducer');\n      return state;\n  }\n};\nexport default authReducer;\n\n// {type: 'ADD', task: \"Walk the Dog\"}\n// {type: 'REMOVE', id: 156651}\n// {type: 'EDIT', id: 112839, newTask: 'Walk Cat'}\n// {type: 'LOGIN', email: '112839@fgjd.com', password: '12344568'}\n// {type: 'LOGIN', emaill: action.email, password: action.password}\n"]},"metadata":{},"sourceType":"module"}