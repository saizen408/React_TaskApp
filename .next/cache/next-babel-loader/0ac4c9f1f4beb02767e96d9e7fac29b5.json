{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport Router from \"next/router\";\nimport { Cookies } from \"react-cookie\";\nconst cookies = new Cookies();\n\nconst authReducer = async (state, action) => {\n  switch (action.type) {\n    case \"LOGIN\":\n      var data = {\n        email: action.email,\n        password: action.password\n      };\n\n      try {\n        const proxyUrl = \"https://cors-anywhere.herokuapp.com/\";\n        const url = \"https://owusu-task-manager.herokuapp.com/users/login\";\n        const response = await fetch(proxyUrl + url, {\n          method: \"POST\",\n          body: _JSON$stringify(data),\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        const userInfo = await response.json();\n        var token = userInfo.token;\n        cookies.set(\"token\", token);\n        state.token = token;\n        Router.push(\"/TodoAppPage\");\n      } catch (e) {\n        state.error = true;\n        console.error(\"Error:\", e);\n        Router.push(\"/\");\n      }\n\n      return state;\n\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;","map":null,"metadata":{},"sourceType":"module"}