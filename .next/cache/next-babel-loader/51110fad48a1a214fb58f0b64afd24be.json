{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport Todo from './Todo';\nimport { TodosContext } from './contexts/todos.context';\nimport { UserContext } from './contexts/user.context';\n\nfunction TodoList(_ref) {\n  var posts = _ref.posts;\n  var todos = useContext(TodosContext);\n  if (todos.length) return __jsx(React.Fragment, null, __jsx(Paper, null, __jsx(List, null, todos.map(function (todo, i) {\n    return (// To add a key to a fragment, we have to use the long-hand version\n      __jsx(React.Fragment, {\n        key: i\n      }, __jsx(Todo, _extends({}, todo, {\n        key: todo._id\n      })), i < todos.length - 1 && __jsx(Divider, null))\n    );\n  }))), __jsx(Paper, null, __jsx(\"h1\", null, posts, \" hello \")));\n  return null;\n}\n\nTodoList.getInitialProps = function _callee() {\n  var token, proxyUrl, targetUrl, res, data;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          token = useContext(UserContext);\n          proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n          targetUrl = 'https://owusu-task-manager.herokuapp.com/tasks';\n          _context.prev = 3;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(axios.get(proxyUrl + targetUrl, {\n            headers: {\n              Authorization: 'Bearer ' + token.token\n            }\n          }));\n\n        case 6:\n          res = _context.sent;\n          data = res.data; // const data = res.data\n\n          console.log(data);\n          return _context.abrupt(\"return\", {\n            posts: data\n          });\n\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](3);\n          console.error('Error:', _context.t0);\n\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[3, 12]]);\n}; // export default TodoList;\n// const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n// const targetUrl = 'https://owusu-task-manager.herokuapp.com/tasks';\n// $.ajax({\n//     url: proxyUrl + targetUrl,\n//     type: 'GET',\n//     dataType: 'json',\n//     beforeSend: setHeader\n//   }).then(addTasks);\n//   function setHeader(xhr) {\n//     xhr.setRequestHeader('Authorization', 'Bearer ' + userInfo.token);\n//   }\n// const Index = ({ todos }) => {\n//   return (\n//     <div>\n//       <h1>Our Index Page!!!</h1>\n//       <ul>\n//         {posts.map(post => (\n//           <li key={post.id}>{post.title}</li>\n//         ))}\n//       </ul>\n//     </div>\n//   );\n// };\n\n\nexport default TodoList;","map":{"version":3,"sources":["/Users/ericowusu/Documents/React _Course_Projects/Next/first-next/components/TodoList.js"],"names":["React","useContext","Paper","List","Divider","Todo","TodosContext","UserContext","TodoList","posts","todos","length","map","todo","i","_id","getInitialProps","token","proxyUrl","targetUrl","axios","get","headers","Authorization","res","data","console","log","error"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,YAAT,QAA6B,0BAA7B;AACA,SAASC,WAAT,QAA4B,yBAA5B;;AAEA,SAASC,QAAT,OAA6B;AAAA,MAATC,KAAS,QAATA,KAAS;AAC3B,MAAMC,KAAK,GAAGT,UAAU,CAACK,YAAD,CAAxB;AAEA,MAAII,KAAK,CAACC,MAAV,EACE,OACE,4BACE,MAAC,KAAD,QACE,MAAC,IAAD,QACGD,KAAK,CAACE,GAAN,CAAU,UAACC,IAAD,EAAOC,CAAP;AAAA,WACT;AACA,YAAC,KAAD,CAAO,QAAP;AAAgB,QAAA,GAAG,EAAEA;AAArB,SACE,MAAC,IAAD,eAAUD,IAAV;AAAgB,QAAA,GAAG,EAAEA,IAAI,CAACE;AAA1B,SADF,EAEGD,CAAC,GAAGJ,KAAK,CAACC,MAAN,GAAe,CAAnB,IAAwB,MAAC,OAAD,OAF3B;AAFS;AAAA,GAAV,CADH,CADF,CADF,EAYE,MAAC,KAAD,QACE,kBAAKF,KAAL,YADF,CAZF,CADF;AAkBF,SAAO,IAAP;AACD;;AAEDD,QAAQ,CAACQ,eAAT,GAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBC,UAAAA,KADmB,GACXhB,UAAU,CAACM,WAAD,CADC;AAEnBW,UAAAA,QAFmB,GAER,sCAFQ;AAGnBC,UAAAA,SAHmB,GAGP,gDAHO;AAAA;AAAA;AAAA,2CAMLC,KAAK,CAACC,GAAN,CAAUH,QAAQ,GAAGC,SAArB,EAAgC;AAChDG,YAAAA,OAAO,EAAE;AACPC,cAAAA,aAAa,EAAE,YAAYN,KAAK,CAACA;AAD1B;AADuC,WAAhC,CANK;;AAAA;AAMjBO,UAAAA,GANiB;AAWfC,UAAAA,IAXe,GAWND,GAXM,CAWfC,IAXe,EAWD;;AACtBC,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AAZuB,2CAahB;AACLhB,YAAAA,KAAK,EAAEgB;AADF,WAbgB;;AAAA;AAAA;AAAA;AAiBvBC,UAAAA,OAAO,CAACE,KAAR,CAAc,QAAd;;AAjBuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA3B,C,CAoBA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAepB,QAAf","sourcesContent":["import React, { useContext } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport Todo from './Todo';\nimport { TodosContext } from './contexts/todos.context';\nimport { UserContext } from './contexts/user.context';\n\nfunction TodoList({ posts }) {\n  const todos = useContext(TodosContext);\n\n  if (todos.length)\n    return (\n      <>\n        <Paper>\n          <List>\n            {todos.map((todo, i) => (\n              // To add a key to a fragment, we have to use the long-hand version\n              <React.Fragment key={i}>\n                <Todo {...todo} key={todo._id} />\n                {i < todos.length - 1 && <Divider />}\n              </React.Fragment>\n            ))}\n          </List>\n        </Paper>\n        <Paper>\n          <h1>{posts} hello </h1>\n        </Paper>\n      </>\n    );\n  return null;\n}\n\nTodoList.getInitialProps = async () => {\n  const token = useContext(UserContext);\n  const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n  const targetUrl = 'https://owusu-task-manager.herokuapp.com/tasks';\n\n  try {\n    const res = await axios.get(proxyUrl + targetUrl, {\n      headers: {\n        Authorization: 'Bearer ' + token.token\n      }\n    });\n    const { data } = res; // const data = res.data\n    console.log(data);\n    return {\n      posts: data\n    };\n  } catch (e) {\n    console.error('Error:', e);\n  }\n};\n// export default TodoList;\n\n// const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n// const targetUrl = 'https://owusu-task-manager.herokuapp.com/tasks';\n\n// $.ajax({\n//     url: proxyUrl + targetUrl,\n//     type: 'GET',\n//     dataType: 'json',\n//     beforeSend: setHeader\n//   }).then(addTasks);\n\n//   function setHeader(xhr) {\n//     xhr.setRequestHeader('Authorization', 'Bearer ' + userInfo.token);\n//   }\n\n// const Index = ({ todos }) => {\n//   return (\n//     <div>\n//       <h1>Our Index Page!!!</h1>\n//       <ul>\n//         {posts.map(post => (\n//           <li key={post.id}>{post.title}</li>\n//         ))}\n//       </ul>\n//     </div>\n//   );\n// };\n\nexport default TodoList;\n"]},"metadata":{},"sourceType":"module"}